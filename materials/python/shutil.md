# SHUTIL

> Модуль предоставляет функции для управления файлами и каталогами на уровне ОС.

## Использование

- Копирование, перемещение, удаление файлов.
- Работа с архивами.

## Примеры

```python
shutil.copy(src, dst) # Копирование файла
shutil.copytree(src, dst) # Копирование каталога со всем содержимым
shutil.move(src, dst) # Перемещение файла или каталога
shutil.rmtree(path) # Удаление каталога со всем содержимым
os.remove(file_path) # Удаление файла
shutil.make_archive(base_name, format, root_dir) # Создание архива
shutil.unpack_archive(archive_name, extract_dir) # Разархивация
shutil.copystat(src, dst) # Копирование метаданных (прав доступа, времени модификации и т.д.)
```

Модуль shutil (от англ, “shell utilities” - утилиты командной оболочки) содержит функции, позволяющие копировать, перемещать, переименовывать и удалять файлы.

## Копирование файлов и папок

```python
from pathlib import Path
import shutil, os

pth = Path.home()

shutil.copy(pth / 'hello.txt', Path.cwd())
print(os.listdir()) # ['1.py', 'bacon.txt', 'hello.txt', 'spam.txt']

shutil.copy(pth / 'hello.txt', Path.cwd() / 'hello_1.txt')
print(os.listdir()) # ['1.py', 'bacon.txt', 'hello.txt', 'hello_1.txt', 'spam.txt']

shutil.copytree(pth / 'spam', pth / 'spam_backup')
```
- С помощью модуля `shutil` можно копировать как файлы, так и целые папки. Функция `shutil.cору(источник, назначение)` скопирует файл источник в папку назначение. Оба параметра функции могут быть либо строками, либо объектами `Path`. Если аргумент назначение - это имя файла, то оно будет использовано в качестве нового имени копированного файла. Функция возвращает строку либо объект `Path` для скопированного файла.
- Функция `shutil.copytree(источник, назначение)` копирует все дерево каталогов вместе со всеми папками и файлами, которые в нем содержатся. В результате папка источник копируется вместе со всеми находящимися в ней файлами и подпапками в папку назначение. Оба параметра функции являются строками. Функция возвращает строку пути к скопированной папке.

## Перемещение и переименование файлов и папок

```python
shutil.move(pth / 'hello.txt', 'D:\\\\Projects\\DevOps')
```
- Функция `shutil.move(источник, назначение)` перемещает файл или папку источник в расположение назначение и возвращает строку абсолютного пути к новому расположению. Если параметру назначение соответствует папка, то исходный файл перемещается в эту папку, сохраняя свое текущее имя.
- Если в папке назначения уже существует файл hello.txt, то он будет заменен. Поскольку таким образом можно случайно потерять нужный файл, при использовании функции `move()` следует проявлять определенную осторожность.

```python
shutil.move(pth / 'hello.txt', 'D:\\\\Projects\\DevOps\\\\privet.txt')
```
- Параметр назначение может также задавать имя файла. В примере исходный файл перемещается и переименовывается.

## Безвозвратное удаление файлов и папок

Если для удаления одиночного файла или одиночной пустой папки можно воспользоваться функциями модуля `os`, то для удаления папки вместе со всем ее содержимым следует использовать модуль `shutil`.

- Функция `os.unlink(путь)` удаляет файл, находящийся по указанному пути.
- Функция `os.rmdir(путь)` удаляет папку, находящуюся по указанному пути. Эта папка должна быть пустой, т.е. не содержать никаких других подпапок и файлов.
- Функция `shutil.rmtree(путь)` удаляет папку, находящуюся по указанному пути, вместе со всеми содержащимися в ней подпапками и файлами.

```python
import os
from pathlib import Path 

for filename in os.listdir():
    for filename in Path.cwd().glob('*.txt'):
        os.unlink(filename)
```
- Программа, которая удаляет файлы с расширением .txt.
