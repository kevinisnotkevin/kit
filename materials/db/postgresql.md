# Postgresql

**PostgreSQL** - это открытая реляционная система управления базами данных (СУБД), разработанная для работы с большими объемами данных и высокими нагрузками. Она поддерживает SQL для управления данными и широко используется для построения как небольших, так и масштабируемых систем.

Основные особенности PostgreSQL:
- **Открытый исходный код**: PostgreSQL распространяется бесплатно, с открытым исходным кодом и активно развивается сообществом разработчиков.
- **Поддержка стандарта SQL**: PostgreSQL соответствует стандарту SQL и предоставляет расширенные функции для работы с транзакциями, индексами, триггерами и хранимыми процедурами.
- **Расширяемость**: СУБД поддерживает пользовательские типы данных, функции, языки процедур и расширения, что делает её гибкой и адаптируемой для различных сценариев.
- **Поддержка ACID**: PostgreSQL гарантирует целостность данных, поддерживая свойства ACID (атомарность, согласованность, изолированность, долговечность).
- **Масштабируемость**: Подходит как для небольших приложений, так и для крупных распределённых систем, обрабатывающих большие объёмы данных.
- **Поддержка расширенных типов данных**: Помимо стандартных типов данных (строки, числа и т.д.), PostgreSQL поддерживает JSON, XML, массивы и географические данные (через PostGIS).
- **Многопользовательская среда**: PostgreSQL позволяет создавать пользователей и управлять их правами доступа к базам данных и таблицам.

## Установка

```bash
apt update && apt install postgresql postgresql-contrib
```
- Установка PostgreSQL

## PSQL

**psql** - это cli для работы с БД postgresql. С помощью psql можно подключаться к серверу postgresql, выполнять sql-запросы, управлять БД, таблицами, пользователями и получать информацию о состоянии системы.

```bash
sudo -u postgres psql
```
- Подключение к postgresql

```bash
psql -U username -d dbname -h host -p 5432
```
- Подключение к postgresql

```bash
# Выйти из psql
\q

# Показать список БД
\l

# Подключиться к БД
\c dbname

# Показать список таблиц
\dt

# Показать список пользователей
\du

# Показать структуру таблицы
\d tablename

# Список индексов
\di

# Список таблиц всех схем
\dt *.*
```
- Подключение и навигация

```
pg_dump dbname > backup.sql
```
- Создание резервной копии БД

```
psql dbname < backup.sql
```
- Восстановление БД из бэкапа