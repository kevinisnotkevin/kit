# API

API представляет собой программный интерфейс, который описывает способ взаимодействия между различными программными компонентами. Он определяет методы вызова и обмена данными между системами, а также устанавливает правила и форматы данных, которые должны быть соблюдены при обмене информацией.

API играют значительную роль в разработке программного обеспечения и подлежат тщательному тестированию на функциональность, производительность, безопасность и надежность. Важно гарантировать, что API работает корректно и эффективно, чтобы обеспечить стабильное функционирование программных систем, к которым они предоставляют доступ.

## Зачем нужно тестировать API?

Тестирование API является одним из методов тестирования программного обеспечения, при котором API проверяются на уровне обмена сообщениями, таких как веб-сервисы SOAP, REST API и другие.

Действительно, вручную тестировать API сложно. Ведь их функциональность не связана непосредственно с пользовательским интерфейсом, и фронтенд не предоставляет возможности для взаимодействия с пользователем. Поэтому для успешного тестирования API требуются специальные инструменты и подходы.

Для тестирования API существуют разнообразные инструменты, включая фреймворки автоматизации, утилиты для отправки HTTP-запросов, средства для создания тестовых данных и многие другие. Эти инструменты позволяют создавать и отправлять запросы к API, а также проверять возвращаемые результаты на соответствие ожидаемым значениям.

Использование этих инструментов упрощает тестирование и позволяет проверять функциональность, производительность, безопасность и надежность API. Это помогает обеспечить высокое качество программного обеспечения и надежность взаимодействия между различными системами через API.

## Немного взаимодействия с API

Воспользуемся специальным ресурсом, для отработки своих навыков: dummyapi.io

## Взаимодействие с API через curl

Давайте рассмотрим запрос с методом POST подробнее и выполним его только без браузера, используя консоли Linux Bash и Windows PowerShell (и то и другое можно использовать и из одной операционной системы, будем использовать две для наглядности и тренировки - навыки общения с помощью curl и powershell нам еще пригодятся)

Рассмотрев подробнее пакет мы видим информацию:

- на какой url был отправлен запрос
- каким методом были переданы данные
- статус код ответа сервера
- ip адрес cервиса
- Заголовки запроса
- Заголовки ответа

Давайте создадим еще один App ID используя CURL

Проанализировав пакет POST, мы можем понять какие значения нам нужно отправить вручную, чтобы создать токен:
- Request URL
- Method POST
- Header 1 Content-Type
- Header 2 Authorization

```bash
curl 'Request URL' -X 'Method' -H 'Header 1' -H 'Header 2' 
```
- Синтаксис curl

Обратите внимание, что у Заголовка Authorization определен вид, в данном случае это Bearer его также нужно указать.

В ответ мы получим наш новый App ID подчеркнут красным.

Можете перезагрузить страницу в браузере и вы увидите, что появился еще один App ID.

## Взаимодействие с API через powershell

Все тоже самое можно реализовать и через PowerShell, нам понадобится все тот же набор компонентов

- Request URL
- Method POST
- Header 1 Content-Type
- Header 2 Authorization

```powershell
Invoke-WebRequest -UseBasicParsing -Uri "Request URL" -Method "Method" -Headers $headers -ContentType "value content-type"
```
- Но изменится синтаксис (Рекомендуется использовать PowerShell v7+ для использования современных методов синтаксиса)
```powershell
$headers = @{} //означает создание массива
```
- Можно заметить, что после обозначения флага “-Headers” идет что-то неясное, это называется переменная, и чтобы ее использовать, ее необходимо предварительно создать
```powershell
$headers.Add("Authorization", "TokenType $token")
```
- Чтобы наполнить массив
```powershell
$token = "token value"
```
- Создание токена

Теперь можно отправить полный запрос и получить ответ(подчеркнуто красной линией).

Опять же можно перезагрузить страницу в браузере и увидите свой новый App ID.

## Какие существуют утилиты для тестирования?

Postman - мощный и интуитивно понятный инструмент, предназначенный специально для тестирования и разработки API.

Burp Suite - один из самых мощных инструментов для тестирования на безопасность WEB сервисов. Процесс заключается в проксировании трафика клиента через Burp, а затем его тестировании обычным способом.

## Расширения браузеров

Для тестирования API не обязательно использовать отдельное ПО. Достаточно установить расширение в браузер.

Postman Interceptor - еще один продукт разработчиков Postman, cреди возможностей стоит отметить автоматизацию тестов, возможность отправлять заголовки без использования Proxy. Есть и минусы, вроде интерфейса, с которым сложно разобраться поначалу. И ещё требуется дополнительная установка Interceptor Bridge

Talend API Tester. Это расширение поддерживает импорт данных из Postman Collections, Swagger, OAS, Open API и HAR. Запись логов возможна локально и в облако. А ещё Talend API Tester очень прост в понимании. Можно создавать динамические запросы с различными переменными, заголовками и прочими штуками. Ответы можно сравнивать с предыдущими прогонами. Есть поддержка совместной работы.