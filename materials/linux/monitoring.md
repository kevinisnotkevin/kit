# МОНИТОРИНГ СИСТЕМЫ

Мониторинг системы включает отслеживание различных параметров работы сервера, нагрузку на процессор, диск, доступное дисковое пространство и оперативную память.

## TOP

**top** - это утилита мониторинг запущенных процессов и их потреблении CPU.

## HTOP

**htop** - это утилита для мониторинга процессов, которая заменяет `top`. Показывает динамический список системных процессов, список обычно выравнивается по использованию ЦПУ. В отличие от top, htop показывает все процессы в системе. Также показывает время непрерывной работы, использование процессоров и памяти.

```bash
apt-get install htop
```
- Установка.

```bash
htop
```
- Запуск.

**Интерфейс**

- **PID** - идентификатор процесса.
- **USER** - владелец процесса.
- **PRI** - текуший приоритет (влияет на процессорное время, отводимое процессу, значение по умолчанию - 20; чем меньше приоритет, тем больше времени отводится процессу, следовательно он выполняется быстрее).
- **NI** - величина изменения приоритета относительно значения PRI (клавиши F7, F8).
- **VIRT** - общий объем виртуальной памяти, используемой процессом. Включает в себя: область кода (CODE), данные (DATA), разделяемые библиотеки (SHARED) и страницы, перемещенные в swap-область памяти. Если приложение потребовало от ядра выделить ему 100Мб памяти, а использует всего 5 Мб, данный столбец всё равно будет показывать цифру 100. **CODE** - объем памяти, содержащий исполняемый код процесса. **DATA** - объем памяти, занятой данными, используемыми процессом в ходе выполнения. **SWAP** - объем памяти, используемой процессом, но перемещенной в swap-область.
- **RES** - количество резидентной (не перемещаемой в swap) памяти в килобайтах. Если приложение потребовало от ядра выделить ему 100Мб памяти, а использует всего 5 Мб, то данный столбец покажет 5. Но здесь есть два ньюанса: а) RES не показывает сколько данных было перемещено в swap, б) часть RES-памяти может быть разделяемой.
- **SHR** - количество разделяемой (shared) памяти программы в килобайтах, т.е. памяти, которая может быть использована другими приложениями.
- **S** - состояние процесса: **S** - так называемое состояние сна; **R** - состояние выполнения; **D** - состояние ожидания.
- **CPU%** - использование процессора в процентном отношении.
- **MEM%** - использование процессом памяти в процентном отношении.
- **TIME+** - время работы процесса.
- **Command** - указывает на команду, которой был запущен процесс.
- **Load average** - отражает число блокирующих процессов в очереди на исполнение в определенный временной интервал, а именно 1 минута, 5 минут и 15 минут, соответственно. Блокирующий процесс - это процесс, который ожидает ресурсов для продолжения работы.
- **Uptime** - время работы системы.

**Управление**

- **F1** - справка; 
- **F2** - настройки; 
- **F3** - поиск процесса; 
- **F4** - сортировка списка процессов (от большего к меньшему или от меньшего к большему); 
- **F5** - устанавливает древовидное отображение (корни - родительские процессы, а листья - дочерние) и наоборот; 
- **F6** - открывает панель с выбором параметра сортировки процессов; 
- **F7** - увеличить приоритет выполнения текущего процесса; 
- **F8** - уменьшить приоритет выполнения текущего процесса; 
- **F9** - убить процесс; 
- **F10** - выйти из программы.

## FREE

**free** - это утилита для мониторинга RAM системы, которая предоствляет информацию об общем обьеме физической и swap памяти, а также свободной и используемой памяти и swap пространстве в системе.

**Описание столбцов**

- **total** - это число представляет собой общий объем памяти, который может использоваться приложениями.
- **used** - использованная память (`used = total - free - buffers - cache`).
- **free** - Свободная / Неиспользуемая память.
- **shared** - этот столбец можно игнорировать, так как он не имеет смысла. Это здесь только для обратной совместимости.
- **buff / cache** - объединенная память, используемая буферами ядра, кешем страниц и слэбами. Эта память может быть восстановлена в любое время, если это необходимо приложениям. Флаг `-w` отображает эти значения в отдельных столбцах.
- **available** - оценка объема памяти, доступной для запуска новых приложений без замены.

