# USERADD

Многопользовательская архитектура - одна из первых особенностей Linux, которая существует еще с зарождения системы. В системе могут работать одновременно множество пользователей благодаря удаленному входу, а также пользователи используются для запуска определенных сервисов. Основу управления правами доступа в Linux и уровнем привилегий в Linux составляют именно пользователи. Изначально, еще при проектировании системы существовал пользователь root, которому позволено выполнять любые действия и другие пользователи, права которых настраиваются с помощью вступления их в группы Linux и установки прав на каталоги.

Вся информация о пользователях находится в файле `/etc/passwd`. Можно создать пользователя просто добавив его туда, но так делать не следует, поскольку для этой задачи существуют специальные утилиты. 

**useradd** - это утилита, которая позволяет зарегистрировать нового пользователя или изменить информацию об уже имеющемся. Во время создания можно даже создать домашний каталог пользователя и скопировать в него системные файлы.

**ОСНОВНЫЕ ФЛАГИ**

- **b** - базовый каталог для размещения домашнего каталога пользователя, по умолчанию /home;
- **c** - комментарий к учетной записи;
- **d** - домашний каталог, в котором будут размещаться файлы пользователя;
- **e** - дата, когда учетная запись пользователя будет заблокирована, в формате ГГГГ-ММ-ДД;
- **f** - заблокировать учетную запись сразу после создания;
- **g** - основная группа пользователя;
- **G** - список дополнительных групп;
- **k** - каталог с шаблонами конфигурационных файлов;
- **l** - не сохранять информацию о входах пользователя в lastlog и faillog;
- **m** - создавать домашний каталог пользователя, если он не существует;
- **M** - не создавать домашнюю папку;
- **N** - не создавать группу с именем пользователя;
- **o** - разрешить создание пользователя linux с неуникальным идентификатором UID;
- **p** - задать пароль пользователя;
- **r** - создать системного пользователя, не имеет оболочки входа, без домашней директории и с идентификатором до SYS_UID_MAX;
- **s** - командная оболочка для пользователя;
- **u** - идентификатор для пользователя;
- **D** - отобразить параметры, которые используются по умолчанию для создания пользователя. Если вместе с этой опцией задать еще какой-либо параметр, то его значение по умолчанию будет переопределено.

```bash
sudo useradd test
```
- Создание пользователя с минимальными настройками.

```bash
sudo useradd -p password -s /bin/bash test1
```
- Создание пользователя с паролем и оболочкой `/bin/bash`.

```bash
sudo useradd -G adm,cdrom,wheel -p password -s /bin/bash test2
```
- Создание пользователя с разрешением читать логи, использовать cdrom и sudo. Для того чтобы получать доступ к системным ресурсам пользователю нужно быть участником групп, у которых есть доступ к этим ресурсам.

```bash
sudo useradd -G adm,cdrom,wheel -p password -s /bin/bash -e 01:01:2018 test2
```
- Создание пользователя с установкой даты, когда аккаунт будет заблокирован.

```bash
sudo useradd -o -u 0 -g 0 -s /bin/bash newroot
```
- Создание пользователя с правами root. Для этого разрешаем создавать пользователя с неуникальным uid, устанавливаем идентификатор в 0 и идентификатор основной группы тоже в 0.

```bash
# Создать пользователя user1, назначить домашний каталог /home/user1, назначить shell /bin/bash, включить в группу admin и добавить комментарий Comment
useradd -c "Comment" -g admin -d /home/user1 -s /bin/bash user1

# Создать пользователя user1
useradd user1

# Создать пользователя с домашним каталогом
useradd -m user1

# Создать пользователя и добавить в группу sudo
useradd -G sudo user1
```
