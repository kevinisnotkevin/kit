# МЕНЕДЖЕРЫ ПАКЕТОВ

**Менеджер пакетов** - это программа, выполняющая установку, удаление или обновление любого пакета или группы пакетов, и автомитически выполняющая все необходимые для этого процедуры (доставку пакетов из удалённых репозиториев, вычисление зависимостей и установку требуемых по ним пакетов, удаление замещаемых пакетов и т. п.).

**Категории пакетных менеджеров**

- **Высокоуровневые менеджеры.** Применяются для поиска и скачивания пакетов из репозиториев. В процессе работы могут задействовать низкоуровневые менеджеры для инсталляции загруженных программ.
- **Низкоуровневые менеджеры.** Используются для установки локальных пакетов, загруженных вручную пользователем, или высокоуровневым пакетным менеджером.

**Распространенные форматы пакетов**

- **DEB (.deb)**. Самый популярный формат пакетов дистрибутива Debian и его ближайших родственников - Ubuntu, MX Linux, Pop!OS, elementary OS и других.
- **RPM (.rpm)**. Разработан компанией Red Hat и внедрен в дистрибутив RHEL. Также применяется в таких системах как Fedora и CentOS.
- **PKG.TAR.XZ**. Стандартный тип пакетов для дистрибутива ArchLinux и его производных - Manjaro, ARCOLINUX и других.
- **Ebuild (.ebuild).** Скрипт bash-сценария для компиляции программ в дистрибутивах Gentoo и Calculate Linux.

Для корректного функционирования пакетных менеджеров необходимо корректное отслеживание пакетных зависимостей. Зависимости - список дополнительных пакетов и библиотек, участвующие в работе программы. Во время установки приложения пакетный менеджер или компилятор считывают специальный файл со списком зависимостей, а после проверяют их наличие в системе.

Если важная зависимость будет не удовлетворена при установке программы низкоуровневым менеджером, то будет выдана ошибка с названием отсутствующего пакета. В подобной ситуации проблема решается отдельной установкой недостающего пакета.

При использовании высокоуровнего пакетного менеджера для установки программы, зависимые пакеты будут установлены в автоматическом режиме, без вмешательства пользователя.

## APT

**APT (Advanced Packaging Tool)** - это набор утилит, которые устанавливают, удаляют, обновляют, ищут пакеты, а также управляют репозиториями. 

Установка скачанных пакетов производится утилитой DPKG. APT используется по умолчанию в дистрибутивах с архитектурой Debian.

У APT есть список репозиториев, из которых происходит установка пакетов. Список хранится в текстовом файле `/etc/apt/sources.list`, а также в директории `/etc/apt/sources.list.d/`. 

При выполнении команды `apt update`, APT проходит по списку репозиториев и из каждого репозитория в списке получает информацию о пакетах, находящихся в репозитории.

`apt vs apt-get`: apt выполняет практически все те же функции, что и apt-get, но она проще и нагляднее выводит информацию.

```bash
apt check
```
- Проверить целостность зависимостей.

```bash
apt update
```
- Обновление списка пакетов.
- Если выходит новая версия какого-нибудь пакета, то APT не узнает об этом, пока не будет выполнена эта команда. Поэтому, если установить пакет (не выполнив предварительно apt update), то будет установлена та версия пакета, информация о которой хранится в системе в данный момент.

```bash
apt upgrade
```
- Обновление пакетов, установленных в системе.

```bash
apt full-upgrade
```
- Обновление пакетов, а также удаление или установка пакетов, если этого требуют зависимости.

```bash
apt install pack
apt install pack1 pack2
apt install pack=version
```
- Разные способы установки пакетов.

```bash
apt remove pack
```
- Удаление установленного пакета с сохранением конфигов.

```bash
apt purge pack
```
- Удаление пакета и его конфигов. Конфиги, хранящиеся в домашней директории, удалены не будут. `apt purge` можно выполнить для уже удаленного пакета, чтобы доудалить его конфиги.

```bash
apt autoremove
```
- Удаление неиспользуемых пакетов. При установке пакета устанавливаются его зависимости, а при удалении пакета зависимости остаются.

```bash
apt list --installed
```
- Вывод установленных пакетов в системе.

```bash
apt list --upgradable
```
- Вывод пакетов в системе, которые у которых вышла новая версия.

```bash
apt list --all-versions
```
- Вывод всех пакетов, доступных для системы.

```bash
apt search pattern
```
- Поиск пакетов по названию и описанию.

```bash
apt show pack
```
- Вывод информации о пакете.

```bash
apt edit-sources
```
- Редактирование списка репозиториев.
- Открывает файл `/etc/apt/sources.list` для редактирования, после сохранения изменений и закрытия редактора, выполняет проверку файла на предмет ошибок. 
- В случае наличия ошибок, выводит предложение на повторное редактирование файла, чтобы исправить ошибки.

## DPKG

**DPKG (Debian Package)** - это система управления пакетами в Debian и дистрибутивах на его основе, например Ubuntu. Низкоуровневый пакетный менеджер создан только для работы с локальными DEB пакетами и не может самостоятельно разрешать зависимости, а также скачивать пакеты из репозиториев.

Удаление пакетов с использованием dpkg в большинстве случаев не рекомендуется. Лучше использовать менеджер пакетов, отслеживающий зависимости, чтобы гарантировать, что система находится в связанном состоянии. Например, использование dpkg -r zip удалит пакет zip, однако любые пакеты, зависящие от него, останутся установленными и более не смогут работать правильно.

```bash
dpkg -s package
```
- Вывод информации о конкретном пакете.

```bash
dpkg -l
```
- Вывод списка пакетов, установленных в системе.

```bash
dpkg -L ufw
```
- Вывод списка файлов, установленных пакетом.

```bash
dpkg -S /etc/host.conf
```
- Узнать каким пакетом установлен файл. Многие файлы автоматически создаются в процессе установки пакета, но несмотря на то, что они находятся на файловой системе, dpkg -S может не знать какому пакету они принадлежат.

```bash
dpkg -i pack.deb
```
- Установка пакета из `deb` файла.

```bash
dpkg -r pack
```
- Удаление пакета.
- Удаление пакетов с использованием dpkg в большинстве случаев не рекомендуется. Лучше использовать менеджер пакетов, отслеживающий зависимости, чтобы гарантировать, что система находится в связанном состоянии. 
- Например, использование `dpkg -r pack` удалит пакет `pack`, однако любые пакеты, зависящие от него, останутся установленными и более не смогут работать правильно.

## RPM

**RPM (Red Hat Package Manager)** - это утилита управления пакетами для Linux систем на базе Red Hat, таких как (RHEL, CentOS и Fedora). Она используется для установки, удаления, обновления, запроса и проверки пакетов ПО. Пакет состоит из архива файлов и информации о пакете, включая имя, версию и описание. Формат файлов также называется RPM.

**Основные режимы**

- **Install** (используется для установки любого пакета RPM).
- **Remove** (используется для удаления, стирания или деинсталляции пакета).
- **Upgrade** (используется для обновления существующего пакета).
- **Query** (используется для запроса пакета).
- **Verify** (используется для проверки пакетов RPM).

## YUM

**YUM (Yellowdog Updater, Modified)** - это высокоуровневый пакетный менеджер, написанный на языке Python для систем RED HAT (RHEL, CentOS, Fedora). Программа представляет собой своеобразную оболочку для утилиты RPM. В задачу YUM входит скачивание и обновление пакетов из репозиториев, а также удовлетворение зависимостей во время установки программы.

## Pacman

**Pacman** - это высокоуровневый пакетный менеджер системы Arch Linux и его родственных дистрибутивов (Manjaro, EndeavourOS и др.). Программа написана на языке C# и совмещает высокую функциональность, легкость и производительность. В качестве пакетов используются архивы pkg.tar.xz.

## Synaptic

**Synaptic** - это графический менеджер пакетов, работающий на основе APT. Программа пригодится новичкам, плохо знакомым с командной строкой. Несмотря на простоту интерфейса, утилита предоставляет весь необходимый функционал пакетного менеджера APT.

## GIT

**Git** - это система контроля версий и совместной разработки проектов с открытым исходным кодом. С помощью git можно отслеживать изменения в исходном коде своих проектов, возвращать предыдущие версии в случае критических ошибок, а также делиться своим кодом со всеми желающими и принимать от них исправления. Здесь нет каких-либо требований к языку или структуре файлов, поэтому у разработчиков полная свобода действий. С помощью этой системы контоля версии можно получать исходные коды приложений.