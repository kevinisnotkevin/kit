## Настройка сети

Прежде чем Вы начнете, убедитесь, что:

- Различные сетевые утилиты, предназначенные для автоматического конфигурирования сети выключены.
- Различные сетевые фильтры (например, iptables), и утилиты их конфигурирования (например, Firestarter) отключены/правильно настроены и не вмешиваются в работу сети.
- У Вас есть все необходимые параметры для подключения в Вашей сети (например, IP-адрес, маска подсети и шлюз по умолчанию для соединения с использованием статического IP).
- Устройства сети осуществляющие фильтрацию по MAC-адресу правильно настроены и «знают» Ваш сетевой интерфейс.
- Драйвер Вашего сетевого устройства корректно установлен, кабель (при проводном соединении) исправен и подсоединен.

Для настроек вам обязательно потребуется имя вашего сетевого адаптера. Команды `ip a` и `ifconfig` позволяют посмотреть сетевые интерфейсы системы.

- **enp0s3** - это физический интерфейс, который мы и будем настраивать.
- **eth0** - это физический интерфейс, который обозначает что используется Ethernet интерфейс.
- **lo (loopback)** - это виртуальный интерфейс, указывающий на хост.

```bash
nano /etc/network/interfaces
```
- Настройки сети находятся в файле `/etc/network/interfaces`. Нас интересует auto и iface. Первая указывает, что нужно активировать интерфейс при загрузке, вторая же определяет настройки самого интерфейса.

## Настройка динамического IP-адреса

```bash
auto enp0s3 iface enp0s3 inet dhcp
```
- Добавьте в файл следующую строку, чтобы запускать интерфейс при загрузке и получать IP-адрес автоматически по DHCP.

```bash
service networking restart
```
- Перезагружаем сеть.

## Настройка статического адреса

При настройке статического IP-адреса компьютер не будет связываться с DHCP-сервером, поэтому здесь придётся указать намного больше параметров.

```txt
auto eth0
iface eth0 inet static
address 192.168.1.7
gateway 192.168.1.1
netmask 255.255.255.0
network 192.168.1.0
broadcast 192.168.1.255
```
- Добавляем в файл `/etc/network/interfaces` настройку интерфейса `eth0`, где:
- **address** - наш IP-адрес.
- **gateway** - шлюз, через который будем получать доступ в интернет.
- **netmask** - маска сети.
- **network** - адрес сети, имеет тот же адрес, что и шлюз, только с нулем вместо единицы.
- **broadcast** - широковещательный адрес сети, отправленный на него пакет придет всем компьютерам локальной сети.
- network и broadcast - это первый и последний IP-адреса сети.

```bash
service networking restart
```
- Перезагружаем сеть.

## Настройка сети с использованием команды ip

```bash
sudo ip link set enp0s3 up
```
- Включаем сетевой интерфейс.

```bash
sudo dhclient enp0s3
```
- Запрашиваем IP-адрес у DHCP-сервера.

```bash
sudo ip addr add 192.168.1.7/255.255.255.0 broadcast 192.168.1.255 dev enp0s3
```
- Устанавливаем IP-адрес, маску сети и широковещательный адрес для интерфейса. Здесь 192.168.1.7 - IP-адрес, 255.255.255.0 - маска сети, 192.168.1.255 - широковещательный адрес.

```bash
sudo ip route add default via 192.168.1.1
```
- Указываем IP-адрес шлюза.

```bash
dns-nameservers 8.8.8.8 4.4.4.4
```
- Настраиваем DNS. В файл `/etc/network/interfaces` добавляем строку. При настройке IP-адреса через DHCP используются правильные DNS-серверы, а при настройке IP-адреса вручную могут использоваться неправильные. Во втором случае необходимо выполнить этот шаг. Здесь 8.8.8.8 и 4.4.4.4 это IP-адреса DNS серверов. Дальше сохраните файл и перезапустите сеть. Далее перезапускаем сеть.
