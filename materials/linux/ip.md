# IP

**ip** - инструмент для настройки сетевых интерфейсов. Он используется для включения или выключения интерфейсов, назначения и удаления адресов и маршрутов, управления кешем ARP и многого другого. Утилита ip является частью пакета iproute2, который установлен во всех современных дистрибутивах Linux.

- Конфигурации, установленные с помощью ip, не являются постоянными. После перезапуска системы все изменения теряются. Чтобы сделать изменения постоянными, необходимо отредактировать файлы конфигурации конкретного дистрибутива или добавить команды в сценарий запуска.

> [!INFO] Кстати
> Только root или пользователи с привилегиями sudo могут настраивать сетевые интерфейсы

```bash
# Таблица маршрутизации
ip route

# Список всех сетевых интерфейсов
ip addr
# Или
ip a

# Отображение только IPv4-адресов
ip -4 addr

# Информация об интерфейсе
ip addr show dev eth0

# Добавление IP-адреса с маской сетевому устройству eth0. Таким образом можно назначать несколько IP-адресов одному интерфейсу
ip address add 0.0.0.0/24 dev eth0

# Удалить IP-адрес из интерфейса
ip address del 0.0.0.0/24 dev eth0

# Список всех сетевых интерфейсов. Не выводит информацию об IP-адресах
ip link show

# Информация о конкретном сетевом интерфейсе
ip link show dev eth0

# Включение интерфейса
ip link set dev eth0 up

# Выключение интерфейса
ip link set dev eth0 up

# Таблица маршрутизации
ip route
ip route list

# Маршрутизация для определенной сети
ip r list 127.0.0.0/24

# Добавление маршрута к 127.0.0.0/24 через шлюз 127.0.0.1
ip route add 127.0.0.0/24 via 127.0.0.1

# Добавление маршрута к 127.0.0.0/24, который может быть достигнут на устройстве eth0
ip route add 127.0.0.0/24 dev eth0

# Добавление маршрута по умолчанию через локальный шлюз 192.168.121.1, который может быть достигнут на устройстве eth0
ip route add default via 127.0.0.1 dev eth0

# Удаление маршрута по умолчанию
ip route del default

# Удаление маршрута для 127.0.0.0/24 через шлюз 127.0.0.1
ip route del 127.0.0.0/24 via 127.0.0.1
```
