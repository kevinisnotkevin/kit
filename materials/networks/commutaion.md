# Коммутация

Коммутация - процесс соединения различных абонентов коммуникационной сети через транзитные узлы

Коммуникационные сети должны обеспечивать связь своих абонентов между собой.

Сетевую связность устройств способен обеспечить коммутатор. Устройства к нему подключаются посредством витой пары с коннектором rj-45, данный тип подключения используется как в домашних сетях, так и в больших корпоративных топологиях. Это самый распространённый тип подключения, хотя в высокопроизводительных сетях могут использоваться другие коннекторы и типы сред передачи данных, обеспечивающие более высокую производительность.

На основе трафика, генерируемого компьютерами, коммутатор определяет, где какое устройство находится.

Коммутатор создает таблицу коммутации, чтобы понять куда отправлять трафик. Это соотношение порта и MAC-адреса.

# Таблица коммутации

От компьютера к коммутатору приходит фрейм, внутри которого кроме данных находятся специальные заголовки. Когда коммутатор получает кадр, отправленный компьютером А компьютеру В, он извлекает из него МАС-адрес приемника и ищет этот МАС-адрес в своей таблице коммутации. Как только в таблице коммутации будет найдена запись, ассоциирующая МАС-адрес приемника (компьютера В) с одним из портов коммутатора, за исключением порта-источника, кадр будет передан через соответствующий выходной порт. Этот процесс называется продвижение (forwarding) кадра. Если бы оказалось, что выходной порт и порт-источник совпадают, то передаваемый кадр был бы коммутатором отброшен. Этот процесс называется фильтрацией (filtering). В том случае, если МАС-адрес приемника в поступившем кадре неизвестен (в таблице коммутации отсутствует соответствующая запись), коммутатор создает множество копий этого кадра и передает их через все свои порты, за исключением того, на который он поступил. Этот процесс называется лавинной маршрутизацией (flooding). Несмотря на то, что процесс лавинной маршрутизации занимает полосу пропускания, он позволяет коммутатору избежать потери кадров, когда МАС-адрес приемника неизвестен, и осуществлять процесс самообучения.

# Методы коммутации

Коммутация трафика может проходить разными способами в зависимости от задач.

Для обеспечения наибольшего быстродействия сети существует способ cut-through. Здесь коммутатор проверяет только первые шесть байт фрейма, так как в них содержится адрес получателя информации.

В рядовых случаях используется коммутация store-and-forward, где коммутатор проверяет фрейм полностью, высчитывает контрольную сумму и проверяет, не изменился ли фрейм за время его передачи по сети. В случае обнаружения ошибки такой фрейм будет отброшен. Это медленный способ коммутации.

В структуре фрейма можно заметить:
- Адрес назначения - Адрес сетевой карты получателя
- Адрес источника - Адрес сетевой карты отправителя
- Длина - Количество байт, начиная от следующего за этим полем и кончая последним перед полем Контрольная сумма
- Данные - сами данные, которые переносит фрейм
- Контрольная сумма - это значение, которое было рассчитано по некоторому алгоритму на основе имеющихся файлов или данных

# Контрольная сумма

Контрольная сумма - некоторое значение, рассчитанное по набору данных путём применения определённого алгоритма и используемое для проверки целостности данных при их передаче или хранении.

Особенностью контрольной суммы является то, что ее алгоритм, при одинаковых входных данных всегда выдает одинаковое значение. При этом малейшее изменение входных данных кардинально меняет значение контрольной суммы.

Эта особенность позволяет использовать контрольную сумму для проверки целостности файлов или данных. Высчитываете контрольную сумму и отправляете ее вместе с файлом. После чего получатель файла повторно высчитывает контрольную сумму файла и сравнивает ее с вашей контрольной суммой. Если значения совпадают, значит файл оригинальный, если нет, значит он получил какие-то изменения.

Также нужно упомянуть, что контрольную сумму нельзя использовать для получения исходных данных. То есть нельзя «расшифровать» хеш-сумму и получить данные которые были хешированы, хеш-сумму можно только сравнить с другой хеш-суммой.

Другими словами, контрольная сумма используется для обнаружения ошибок при передаче кадра по сети. Не стоит забывать, что при обнаружении ошибок кадр отбрасывается.

Контрольная сумма вычисляется по алгоритму CRC-32, а также обнаруживает 99,999999977% всех ошибок в сообщениях длинной до 64 байт

