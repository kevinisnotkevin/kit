# WEBSOCKET

- __Веб-сокеты__ – технология, которая обеспечивает двустороннее, непрерывное соединение между клиентом и сервером. Она позволяет передавать данные в реальном времени без необходимости постоянно обновлять страницу или выполнять новые HTTP-запросы. Есть два типа протоколов: обычные веб-сокеты (WS), в которых нешифрованное соединение, и безопасные веб-сокеты (WSS), которые используют шифрование через TLS. WSS обеспечивает безопасное соединение и предотвращает перехват данных. Веб-сокеты поддержаны различными веб-серверами и платформами: Apache, Nginx, IIS. 
- При использовании веб-сокетов рекомендуется использовать WSS для шифрования данных, обеспечивать должную аутентификацию и авторизацию на уровне каналов веб-сокетов, применять белые списки исходных точек, чтобы контролировать, кто может устанавливать соединение, проводить тщательную валидацию и санацию всех данных, получаемых через веб-сокеты, применять механизмы защиты от пересечения сессий.

## Принцип работы

- Запрос на установку соединения. Клиент посылает HTTP-запрос на сервер с заголовком Upgrade, который указывает на желание переключиться с HTTP на веб-сокет протокол. Запрос также содержит заголовок Connection: Upgrade.
- Ответ от сервера. Если сервер поддерживает веб-сокеты и готов принять соединения, он отвечает на HTTP-запрос клиента статусным кодом 101 Switching Protocols. Сервер также отправляет заголовок Upgrade: websocket и Connection: Upgrade.
- Открывается постоянное соединение. После рукопожатия HTTP-соединение переходит в режим веб-сокетов, устанавливает постоянное, двустороннее TCP-соединение.
- Передача данных. Сразу после соединения, клиент и сервер могут отправлять и получать данные в любое время. Данные передаются в виде кадров (frames), которые могут содержать как текст, так и бинарные файлы.
- Закрытие соединения. Клиент или сервер могут инициировать закрытие соединения, отправив управляющий кадр к кодом операции, указывающим на закрытие соединения. Этот кадр может также содержать статусный код, который говорит причину закрытия соединения.
